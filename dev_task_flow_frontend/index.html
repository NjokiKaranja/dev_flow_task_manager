<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DevTaskFlow</title>
    <style>
      body {
        font-family: "Arial", sans-serif;
        background-color: #1a1a2e;
        color: #ffffff;
        margin: 0;
        padding: 20px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: #16213e;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #14ffec;
        margin-bottom: 20px;
      }

      .task-input {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .task-input input,
      .task-input select,
      .task-input button {
        padding: 10px;
        border: none;
        border-radius: 5px;
      }

      .task-input input {
        flex-grow: 1;
        background-color: #0f3460;
        color: white;
      }

      .task-input button {
        background-color: #14ffec;
        color: #16213e;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .task-input button:hover {
        background-color: #0f3460;
        color: #14ffec;
      }

      .task-list {
        list-style-type: none;
        padding: 0;
      }

      .task-item {
        background-color: #0f3460;
        margin-bottom: 10px;
        padding: 15px;
        border-radius: 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .task-priority-high {
        border-left: 4px solid #ff6b6b;
      }
      .task-priority-medium {
        border-left: 4px solid #feca57;
      }
      .task-priority-low {
        border-left: 4px solid #48dbfb;
      }

      .task-actions button {
        background: none;
        border: none;
        color: #14ffec;
        cursor: pointer;
        margin-left: 10px;
      }

      .task-completed {
        text-decoration: line-through;
        opacity: 0.6;
      }

      .edit-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .edit-modal-content {
        background-color: #16213e;
        padding: 20px;
        border-radius: 10px;
        width: 400px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>DevTaskFlow: Developer Task Management</h1>

      <div class="task-input">
        <form id="addTaskForm">
          <input type="text" id="title" placeholder="Enter new task" required />
          <select id="priority" required>
            <option value="" selected disabled class="text-red">
              Set priority
            </option>
            <option value="low">Low Priority</option>
            <option value="medium">Medium Priority</option>
            <option value="high">High Priority</option>
          </select>
          <!-- <select id="category">
              <option value="coding">Coding</option>
              <option value="design">Design</option>
              <option value="review">Code Review</option>
            </select> -->
          <input type="date" name="due_date" id="due_date" />
          <textarea
            name="description"
            id="description"
            placeholder="Description..."
          ></textarea>
          <button type="submit" id="submitTaskBtn">Add Task</button>
        </form>
      </div>

      <ul id="taskList" class="task-list"></ul>
    </div>

    <div id="editModal" class="edit-modal">
      <div class="edit-modal-content">
        <h2>Edit Task</h2>
        <input
          type="text"
          id="editTaskDescription"
          placeholder="Task Description"
        />
        <select id="editPrioritySelect">
          <option value="low">Low Priority</option>
          <option value="medium">Medium Priority</option>
          <option value="high">High Priority</option>
        </select>
        <select id="editCategorySelect">
          <option value="coding">Coding</option>
          <option value="design">Design</option>
          <option value="review">Code Review</option>
        </select>
        <button onclick="saveEditedTask()">Save</button>
        <button onclick="closeEditModal()">Cancel</button>
      </div>
    </div>

    <!-- <script>
        class TaskManager {
            constructor() {
                this.tasks = JSON.parse(localStorage.getItem('devTasks')) || [];
                this.renderTasks();
            }

            addTask(description, priority, category) {
                const task = {
                    id: Date.now(),
                    description,
                    priority,
                    category,
                    completed: false,
                    createdAt: new Date().toISOString().split('T')[0]
                };
                this.tasks.push(task);
                this.saveTasks();
                this.renderTasks();
            }

            deleteTask(taskId) {
                const confirmed = confirm('Are you sure you want to delete this task?');
                if (confirmed) {
                    this.tasks = this.tasks.filter(task => task.id !== taskId);
                    this.saveTasks();
                    this.renderTasks();
                }
            }

            editTask(taskId, newDescription, newPriority, newCategory) {
                const taskIndex = this.tasks.findIndex(task => task.id === taskId);
                if (taskIndex !== -1) {
                    this.tasks[taskIndex].description = newDescription;
                    this.tasks[taskIndex].priority = newPriority;
                    this.tasks[taskIndex].category = newCategory;
                    this.saveTasks();
                    this.renderTasks();
                    alert('Task updated successfully!');
                }
            }

            toggleTaskCompletion(taskId) {
                const task = this.tasks.find(task => task.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    this.saveTasks();
                    this.renderTasks();
                }
            }

            saveTasks() {
                localStorage.setItem('devTasks', JSON.stringify(this.tasks));
            }

            renderTasks() {
                const taskList = document.getElementById('taskList');
                taskList.innerHTML = '';

                const sortedTasks = this.tasks.sort((a, b) => {
                    const priorityOrder = { high: 3, medium: 2, low: 1 };
                    if (a.completed !== b.completed) {
                        return a.completed ? 1 : -1;
                    }
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                });

                sortedTasks.forEach(task => {
                    const li = document.createElement('li');
                    li.className = `task-item task-priority-${task.priority} ${task.completed ? 'task-completed' : ''}`;
                    
                    li.innerHTML = `
                        <div>
                            ${task.description}
                            <small> | ${task.category} | ${task.priority} | ${task.createdAt}</small>
                        </div>
                        <div class="task-actions">
                            <button onclick="taskManager.toggleTaskCompletion(${task.id})">
                                ${task.completed ? 'Undo' : 'Complete'}
                            </button>
                            <button onclick="openEditModal(${task.id}, '${task.description}', '${task.priority}', '${task.category}')">Edit</button>
                            <button onclick="taskManager.deleteTask(${task.id})">Delete</button>
                        </div>
                    `;
                    
                    taskList.appendChild(li);
                });
            }
        }

        const taskManager = new TaskManager();

        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const prioritySelect = document.getElementById('prioritySelect');
            const categorySelect = document.getElementById('categorySelect');

            if (taskInput.value.trim()) {
                taskManager.addTask(
                    taskInput.value, 
                    prioritySelect.value, 
                    categorySelect.value
                );
                taskInput.value = '';
            }
        }

        function openEditModal(taskId, description, priority, category) {
            const editModal = document.getElementById('editModal');
            const descriptionInput = document.getElementById('editTaskDescription');
            const prioritySelect = document.getElementById('editPrioritySelect');
            const categorySelect = document.getElementById('editCategorySelect');

            descriptionInput.value = description;
            prioritySelect.value = priority;
            categorySelect.value = category;

            editModal.setAttribute('data-task-id', taskId);
            editModal.style.display = 'flex';
        }

        function closeEditModal() {
            const editModal = document.getElementById('editModal');
            editModal.style.display = 'none';
        }

        function saveEditedTask() {
            const editModal = document.getElementById('editModal');
            const taskId = parseInt(editModal.getAttribute('data-task-id'));
            const description = document.getElementById('editTaskDescription').value;
            const priority = document.getElementById('editPrioritySelect').value;
            const category = document.getElementById('editCategorySelect').value;

            taskManager.editTask(taskId, description, priority, category);
            closeEditModal();
        }
    </script> -->
    <script src="/dev_task_flow_frontend/index.js" type="module"></script>
  </body>
</html>
